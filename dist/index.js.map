{"version":3,"file":"index.js","sources":["../node_modules/is-buffer/index.js","../node_modules/ndarray/ndarray.js","../node_modules/iota-array/iota.js","../node_modules/uniq/uniq.js","../node_modules/cwise-compiler/lib/compile.js","../node_modules/cwise-compiler/lib/thunk.js","../node_modules/cwise-compiler/compiler.js","../node_modules/ndarray-ops/ndarray-ops.js","../src/eyetracking.js","../src/index.js"],"sourcesContent":["/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","var iota = require(\"iota-array\")\nvar isBuffer = require(\"is-buffer\")\n\nvar hasTypedArrays  = ((typeof Float64Array) !== \"undefined\")\n\nfunction compare1st(a, b) {\n  return a[0] - b[0]\n}\n\nfunction order() {\n  var stride = this.stride\n  var terms = new Array(stride.length)\n  var i\n  for(i=0; i<terms.length; ++i) {\n    terms[i] = [Math.abs(stride[i]), i]\n  }\n  terms.sort(compare1st)\n  var result = new Array(terms.length)\n  for(i=0; i<result.length; ++i) {\n    result[i] = terms[i][1]\n  }\n  return result\n}\n\nfunction compileConstructor(dtype, dimension) {\n  var className = [\"View\", dimension, \"d\", dtype].join(\"\")\n  if(dimension < 0) {\n    className = \"View_Nil\" + dtype\n  }\n  var useGetters = (dtype === \"generic\")\n\n  if(dimension === -1) {\n    //Special case for trivial arrays\n    var code =\n      \"function \"+className+\"(a){this.data=a;};\\\nvar proto=\"+className+\".prototype;\\\nproto.dtype='\"+dtype+\"';\\\nproto.index=function(){return -1};\\\nproto.size=0;\\\nproto.dimension=-1;\\\nproto.shape=proto.stride=proto.order=[];\\\nproto.lo=proto.hi=proto.transpose=proto.step=\\\nfunction(){return new \"+className+\"(this.data);};\\\nproto.get=proto.set=function(){};\\\nproto.pick=function(){return null};\\\nreturn function construct_\"+className+\"(a){return new \"+className+\"(a);}\"\n    var procedure = new Function(code)\n    return procedure()\n  } else if(dimension === 0) {\n    //Special case for 0d arrays\n    var code =\n      \"function \"+className+\"(a,d) {\\\nthis.data = a;\\\nthis.offset = d\\\n};\\\nvar proto=\"+className+\".prototype;\\\nproto.dtype='\"+dtype+\"';\\\nproto.index=function(){return this.offset};\\\nproto.dimension=0;\\\nproto.size=1;\\\nproto.shape=\\\nproto.stride=\\\nproto.order=[];\\\nproto.lo=\\\nproto.hi=\\\nproto.transpose=\\\nproto.step=function \"+className+\"_copy() {\\\nreturn new \"+className+\"(this.data,this.offset)\\\n};\\\nproto.pick=function \"+className+\"_pick(){\\\nreturn TrivialArray(this.data);\\\n};\\\nproto.valueOf=proto.get=function \"+className+\"_get(){\\\nreturn \"+(useGetters ? \"this.data.get(this.offset)\" : \"this.data[this.offset]\")+\n\"};\\\nproto.set=function \"+className+\"_set(v){\\\nreturn \"+(useGetters ? \"this.data.set(this.offset,v)\" : \"this.data[this.offset]=v\")+\"\\\n};\\\nreturn function construct_\"+className+\"(a,b,c,d){return new \"+className+\"(a,d)}\"\n    var procedure = new Function(\"TrivialArray\", code)\n    return procedure(CACHED_CONSTRUCTORS[dtype][0])\n  }\n\n  var code = [\"'use strict'\"]\n\n  //Create constructor for view\n  var indices = iota(dimension)\n  var args = indices.map(function(i) { return \"i\"+i })\n  var index_str = \"this.offset+\" + indices.map(function(i) {\n        return \"this.stride[\" + i + \"]*i\" + i\n      }).join(\"+\")\n  var shapeArg = indices.map(function(i) {\n      return \"b\"+i\n    }).join(\",\")\n  var strideArg = indices.map(function(i) {\n      return \"c\"+i\n    }).join(\",\")\n  code.push(\n    \"function \"+className+\"(a,\" + shapeArg + \",\" + strideArg + \",d){this.data=a\",\n      \"this.shape=[\" + shapeArg + \"]\",\n      \"this.stride=[\" + strideArg + \"]\",\n      \"this.offset=d|0}\",\n    \"var proto=\"+className+\".prototype\",\n    \"proto.dtype='\"+dtype+\"'\",\n    \"proto.dimension=\"+dimension)\n\n  //view.size:\n  code.push(\"Object.defineProperty(proto,'size',{get:function \"+className+\"_size(){\\\nreturn \"+indices.map(function(i) { return \"this.shape[\"+i+\"]\" }).join(\"*\"),\n\"}})\")\n\n  //view.order:\n  if(dimension === 1) {\n    code.push(\"proto.order=[0]\")\n  } else {\n    code.push(\"Object.defineProperty(proto,'order',{get:\")\n    if(dimension < 4) {\n      code.push(\"function \"+className+\"_order(){\")\n      if(dimension === 2) {\n        code.push(\"return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})\")\n      } else if(dimension === 3) {\n        code.push(\n\"var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);\\\nif(s0>s1){\\\nif(s1>s2){\\\nreturn [2,1,0];\\\n}else if(s0>s2){\\\nreturn [1,2,0];\\\n}else{\\\nreturn [1,0,2];\\\n}\\\n}else if(s0>s2){\\\nreturn [2,0,1];\\\n}else if(s2>s1){\\\nreturn [0,1,2];\\\n}else{\\\nreturn [0,2,1];\\\n}}})\")\n      }\n    } else {\n      code.push(\"ORDER})\")\n    }\n  }\n\n  //view.set(i0, ..., v):\n  code.push(\n\"proto.set=function \"+className+\"_set(\"+args.join(\",\")+\",v){\")\n  if(useGetters) {\n    code.push(\"return this.data.set(\"+index_str+\",v)}\")\n  } else {\n    code.push(\"return this.data[\"+index_str+\"]=v}\")\n  }\n\n  //view.get(i0, ...):\n  code.push(\"proto.get=function \"+className+\"_get(\"+args.join(\",\")+\"){\")\n  if(useGetters) {\n    code.push(\"return this.data.get(\"+index_str+\")}\")\n  } else {\n    code.push(\"return this.data[\"+index_str+\"]}\")\n  }\n\n  //view.index:\n  code.push(\n    \"proto.index=function \"+className+\"_index(\", args.join(), \"){return \"+index_str+\"}\")\n\n  //view.hi():\n  code.push(\"proto.hi=function \"+className+\"_hi(\"+args.join(\",\")+\"){return new \"+className+\"(this.data,\"+\n    indices.map(function(i) {\n      return [\"(typeof i\",i,\"!=='number'||i\",i,\"<0)?this.shape[\", i, \"]:i\", i,\"|0\"].join(\"\")\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"this.stride[\"+i + \"]\"\n    }).join(\",\")+\",this.offset)}\")\n\n  //view.lo():\n  var a_vars = indices.map(function(i) { return \"a\"+i+\"=this.shape[\"+i+\"]\" })\n  var c_vars = indices.map(function(i) { return \"c\"+i+\"=this.stride[\"+i+\"]\" })\n  code.push(\"proto.lo=function \"+className+\"_lo(\"+args.join(\",\")+\"){var b=this.offset,d=0,\"+a_vars.join(\",\")+\",\"+c_vars.join(\",\"))\n  for(var i=0; i<dimension; ++i) {\n    code.push(\n\"if(typeof i\"+i+\"==='number'&&i\"+i+\">=0){\\\nd=i\"+i+\"|0;\\\nb+=c\"+i+\"*d;\\\na\"+i+\"-=d}\")\n  }\n  code.push(\"return new \"+className+\"(this.data,\"+\n    indices.map(function(i) {\n      return \"a\"+i\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"c\"+i\n    }).join(\",\")+\",b)}\")\n\n  //view.step():\n  code.push(\"proto.step=function \"+className+\"_step(\"+args.join(\",\")+\"){var \"+\n    indices.map(function(i) {\n      return \"a\"+i+\"=this.shape[\"+i+\"]\"\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"b\"+i+\"=this.stride[\"+i+\"]\"\n    }).join(\",\")+\",c=this.offset,d=0,ceil=Math.ceil\")\n  for(var i=0; i<dimension; ++i) {\n    code.push(\n\"if(typeof i\"+i+\"==='number'){\\\nd=i\"+i+\"|0;\\\nif(d<0){\\\nc+=b\"+i+\"*(a\"+i+\"-1);\\\na\"+i+\"=ceil(-a\"+i+\"/d)\\\n}else{\\\na\"+i+\"=ceil(a\"+i+\"/d)\\\n}\\\nb\"+i+\"*=d\\\n}\")\n  }\n  code.push(\"return new \"+className+\"(this.data,\"+\n    indices.map(function(i) {\n      return \"a\" + i\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"b\" + i\n    }).join(\",\")+\",c)}\")\n\n  //view.transpose():\n  var tShape = new Array(dimension)\n  var tStride = new Array(dimension)\n  for(var i=0; i<dimension; ++i) {\n    tShape[i] = \"a[i\"+i+\"]\"\n    tStride[i] = \"b[i\"+i+\"]\"\n  }\n  code.push(\"proto.transpose=function \"+className+\"_transpose(\"+args+\"){\"+\n    args.map(function(n,idx) { return n + \"=(\" + n + \"===undefined?\" + idx + \":\" + n + \"|0)\"}).join(\";\"),\n    \"var a=this.shape,b=this.stride;return new \"+className+\"(this.data,\"+tShape.join(\",\")+\",\"+tStride.join(\",\")+\",this.offset)}\")\n\n  //view.pick():\n  code.push(\"proto.pick=function \"+className+\"_pick(\"+args+\"){var a=[],b=[],c=this.offset\")\n  for(var i=0; i<dimension; ++i) {\n    code.push(\"if(typeof i\"+i+\"==='number'&&i\"+i+\">=0){c=(c+this.stride[\"+i+\"]*i\"+i+\")|0}else{a.push(this.shape[\"+i+\"]);b.push(this.stride[\"+i+\"])}\")\n  }\n  code.push(\"var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}\")\n\n  //Add return statement\n  code.push(\"return function construct_\"+className+\"(data,shape,stride,offset){return new \"+className+\"(data,\"+\n    indices.map(function(i) {\n      return \"shape[\"+i+\"]\"\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"stride[\"+i+\"]\"\n    }).join(\",\")+\",offset)}\")\n\n  //Compile procedure\n  var procedure = new Function(\"CTOR_LIST\", \"ORDER\", code.join(\"\\n\"))\n  return procedure(CACHED_CONSTRUCTORS[dtype], order)\n}\n\nfunction arrayDType(data) {\n  if(isBuffer(data)) {\n    return \"buffer\"\n  }\n  if(hasTypedArrays) {\n    switch(Object.prototype.toString.call(data)) {\n      case \"[object Float64Array]\":\n        return \"float64\"\n      case \"[object Float32Array]\":\n        return \"float32\"\n      case \"[object Int8Array]\":\n        return \"int8\"\n      case \"[object Int16Array]\":\n        return \"int16\"\n      case \"[object Int32Array]\":\n        return \"int32\"\n      case \"[object Uint8Array]\":\n        return \"uint8\"\n      case \"[object Uint16Array]\":\n        return \"uint16\"\n      case \"[object Uint32Array]\":\n        return \"uint32\"\n      case \"[object Uint8ClampedArray]\":\n        return \"uint8_clamped\"\n      case \"[object BigInt64Array]\":\n        return \"bigint64\"\n      case \"[object BigUint64Array]\":\n        return \"biguint64\"\n    }\n  }\n  if(Array.isArray(data)) {\n    return \"array\"\n  }\n  return \"generic\"\n}\n\nvar CACHED_CONSTRUCTORS = {\n  \"float32\":[],\n  \"float64\":[],\n  \"int8\":[],\n  \"int16\":[],\n  \"int32\":[],\n  \"uint8\":[],\n  \"uint16\":[],\n  \"uint32\":[],\n  \"array\":[],\n  \"uint8_clamped\":[],\n  \"bigint64\": [],\n  \"biguint64\": [],\n  \"buffer\":[],\n  \"generic\":[]\n}\n\n;(function() {\n  for(var id in CACHED_CONSTRUCTORS) {\n    CACHED_CONSTRUCTORS[id].push(compileConstructor(id, -1))\n  }\n});\n\nfunction wrappedNDArrayCtor(data, shape, stride, offset) {\n  if(data === undefined) {\n    var ctor = CACHED_CONSTRUCTORS.array[0]\n    return ctor([])\n  } else if(typeof data === \"number\") {\n    data = [data]\n  }\n  if(shape === undefined) {\n    shape = [ data.length ]\n  }\n  var d = shape.length\n  if(stride === undefined) {\n    stride = new Array(d)\n    for(var i=d-1, sz=1; i>=0; --i) {\n      stride[i] = sz\n      sz *= shape[i]\n    }\n  }\n  if(offset === undefined) {\n    offset = 0\n    for(var i=0; i<d; ++i) {\n      if(stride[i] < 0) {\n        offset -= (shape[i]-1)*stride[i]\n      }\n    }\n  }\n  var dtype = arrayDType(data)\n  var ctor_list = CACHED_CONSTRUCTORS[dtype]\n  while(ctor_list.length <= d+1) {\n    ctor_list.push(compileConstructor(dtype, ctor_list.length-1))\n  }\n  var ctor = ctor_list[d+1]\n  return ctor(data, shape, stride, offset)\n}\n\nmodule.exports = wrappedNDArrayCtor\n","\"use strict\"\n\nfunction iota(n) {\n  var result = new Array(n)\n  for(var i=0; i<n; ++i) {\n    result[i] = i\n  }\n  return result\n}\n\nmodule.exports = iota","\"use strict\"\n\nfunction unique_pred(list, compare) {\n  var ptr = 1\n    , len = list.length\n    , a=list[0], b=list[0]\n  for(var i=1; i<len; ++i) {\n    b = a\n    a = list[i]\n    if(compare(a, b)) {\n      if(i === ptr) {\n        ptr++\n        continue\n      }\n      list[ptr++] = a\n    }\n  }\n  list.length = ptr\n  return list\n}\n\nfunction unique_eq(list) {\n  var ptr = 1\n    , len = list.length\n    , a=list[0], b = list[0]\n  for(var i=1; i<len; ++i, b=a) {\n    b = a\n    a = list[i]\n    if(a !== b) {\n      if(i === ptr) {\n        ptr++\n        continue\n      }\n      list[ptr++] = a\n    }\n  }\n  list.length = ptr\n  return list\n}\n\nfunction unique(list, compare, sorted) {\n  if(list.length === 0) {\n    return list\n  }\n  if(compare) {\n    if(!sorted) {\n      list.sort(compare)\n    }\n    return unique_pred(list, compare)\n  }\n  if(!sorted) {\n    list.sort()\n  }\n  return unique_eq(list)\n}\n\nmodule.exports = unique\n","\"use strict\"\n\nvar uniq = require(\"uniq\")\n\n// This function generates very simple loops analogous to how you typically traverse arrays (the outermost loop corresponds to the slowest changing index, the innermost loop to the fastest changing index)\n// TODO: If two arrays have the same strides (and offsets) there is potential for decreasing the number of \"pointers\" and related variables. The drawback is that the type signature would become more specific and that there would thus be less potential for caching, but it might still be worth it, especially when dealing with large numbers of arguments.\nfunction innerFill(order, proc, body) {\n  var dimension = order.length\n    , nargs = proc.arrayArgs.length\n    , has_index = proc.indexArgs.length>0\n    , code = []\n    , vars = []\n    , idx=0, pidx=0, i, j\n  for(i=0; i<dimension; ++i) { // Iteration variables\n    vars.push([\"i\",i,\"=0\"].join(\"\"))\n  }\n  //Compute scan deltas\n  for(j=0; j<nargs; ++j) {\n    for(i=0; i<dimension; ++i) {\n      pidx = idx\n      idx = order[i]\n      if(i === 0) { // The innermost/fastest dimension's delta is simply its stride\n        vars.push([\"d\",j,\"s\",i,\"=t\",j,\"p\",idx].join(\"\"))\n      } else { // For other dimensions the delta is basically the stride minus something which essentially \"rewinds\" the previous (more inner) dimension\n        vars.push([\"d\",j,\"s\",i,\"=(t\",j,\"p\",idx,\"-s\",pidx,\"*t\",j,\"p\",pidx,\")\"].join(\"\"))\n      }\n    }\n  }\n  if (vars.length > 0) {\n    code.push(\"var \" + vars.join(\",\"))\n  }  \n  //Scan loop\n  for(i=dimension-1; i>=0; --i) { // Start at largest stride and work your way inwards\n    idx = order[i]\n    code.push([\"for(i\",i,\"=0;i\",i,\"<s\",idx,\";++i\",i,\"){\"].join(\"\"))\n  }\n  //Push body of inner loop\n  code.push(body)\n  //Advance scan pointers\n  for(i=0; i<dimension; ++i) {\n    pidx = idx\n    idx = order[i]\n    for(j=0; j<nargs; ++j) {\n      code.push([\"p\",j,\"+=d\",j,\"s\",i].join(\"\"))\n    }\n    if(has_index) {\n      if(i > 0) {\n        code.push([\"index[\",pidx,\"]-=s\",pidx].join(\"\"))\n      }\n      code.push([\"++index[\",idx,\"]\"].join(\"\"))\n    }\n    code.push(\"}\")\n  }\n  return code.join(\"\\n\")\n}\n\n// Generate \"outer\" loops that loop over blocks of data, applying \"inner\" loops to the blocks by manipulating the local variables in such a way that the inner loop only \"sees\" the current block.\n// TODO: If this is used, then the previous declaration (done by generateCwiseOp) of s* is essentially unnecessary.\n//       I believe the s* are not used elsewhere (in particular, I don't think they're used in the pre/post parts and \"shape\" is defined independently), so it would be possible to make defining the s* dependent on what loop method is being used.\nfunction outerFill(matched, order, proc, body) {\n  var dimension = order.length\n    , nargs = proc.arrayArgs.length\n    , blockSize = proc.blockSize\n    , has_index = proc.indexArgs.length > 0\n    , code = []\n  for(var i=0; i<nargs; ++i) {\n    code.push([\"var offset\",i,\"=p\",i].join(\"\"))\n  }\n  //Generate loops for unmatched dimensions\n  // The order in which these dimensions are traversed is fairly arbitrary (from small stride to large stride, for the first argument)\n  // TODO: It would be nice if the order in which these loops are placed would also be somehow \"optimal\" (at the very least we should check that it really doesn't hurt us if they're not).\n  for(var i=matched; i<dimension; ++i) {\n    code.push([\"for(var j\"+i+\"=SS[\", order[i], \"]|0;j\", i, \">0;){\"].join(\"\")) // Iterate back to front\n    code.push([\"if(j\",i,\"<\",blockSize,\"){\"].join(\"\")) // Either decrease j by blockSize (s = blockSize), or set it to zero (after setting s = j).\n    code.push([\"s\",order[i],\"=j\",i].join(\"\"))\n    code.push([\"j\",i,\"=0\"].join(\"\"))\n    code.push([\"}else{s\",order[i],\"=\",blockSize].join(\"\"))\n    code.push([\"j\",i,\"-=\",blockSize,\"}\"].join(\"\"))\n    if(has_index) {\n      code.push([\"index[\",order[i],\"]=j\",i].join(\"\"))\n    }\n  }\n  for(var i=0; i<nargs; ++i) {\n    var indexStr = [\"offset\"+i]\n    for(var j=matched; j<dimension; ++j) {\n      indexStr.push([\"j\",j,\"*t\",i,\"p\",order[j]].join(\"\"))\n    }\n    code.push([\"p\",i,\"=(\",indexStr.join(\"+\"),\")\"].join(\"\"))\n  }\n  code.push(innerFill(order, proc, body))\n  for(var i=matched; i<dimension; ++i) {\n    code.push(\"}\")\n  }\n  return code.join(\"\\n\")\n}\n\n//Count the number of compatible inner orders\n// This is the length of the longest common prefix of the arrays in orders.\n// Each array in orders lists the dimensions of the correspond ndarray in order of increasing stride.\n// This is thus the maximum number of dimensions that can be efficiently traversed by simple nested loops for all arrays.\nfunction countMatches(orders) {\n  var matched = 0, dimension = orders[0].length\n  while(matched < dimension) {\n    for(var j=1; j<orders.length; ++j) {\n      if(orders[j][matched] !== orders[0][matched]) {\n        return matched\n      }\n    }\n    ++matched\n  }\n  return matched\n}\n\n//Processes a block according to the given data types\n// Replaces variable names by different ones, either \"local\" ones (that are then ferried in and out of the given array) or ones matching the arguments that the function performing the ultimate loop will accept.\nfunction processBlock(block, proc, dtypes) {\n  var code = block.body\n  var pre = []\n  var post = []\n  for(var i=0; i<block.args.length; ++i) {\n    var carg = block.args[i]\n    if(carg.count <= 0) {\n      continue\n    }\n    var re = new RegExp(carg.name, \"g\")\n    var ptrStr = \"\"\n    var arrNum = proc.arrayArgs.indexOf(i)\n    switch(proc.argTypes[i]) {\n      case \"offset\":\n        var offArgIndex = proc.offsetArgIndex.indexOf(i)\n        var offArg = proc.offsetArgs[offArgIndex]\n        arrNum = offArg.array\n        ptrStr = \"+q\" + offArgIndex // Adds offset to the \"pointer\" in the array\n      case \"array\":\n        ptrStr = \"p\" + arrNum + ptrStr\n        var localStr = \"l\" + i\n        var arrStr = \"a\" + arrNum\n        if (proc.arrayBlockIndices[arrNum] === 0) { // Argument to body is just a single value from this array\n          if(carg.count === 1) { // Argument/array used only once(?)\n            if(dtypes[arrNum] === \"generic\") {\n              if(carg.lvalue) {\n                pre.push([\"var \", localStr, \"=\", arrStr, \".get(\", ptrStr, \")\"].join(\"\")) // Is this necessary if the argument is ONLY used as an lvalue? (keep in mind that we can have a += something, so we would actually need to check carg.rvalue)\n                code = code.replace(re, localStr)\n                post.push([arrStr, \".set(\", ptrStr, \",\", localStr,\")\"].join(\"\"))\n              } else {\n                code = code.replace(re, [arrStr, \".get(\", ptrStr, \")\"].join(\"\"))\n              }\n            } else {\n              code = code.replace(re, [arrStr, \"[\", ptrStr, \"]\"].join(\"\"))\n            }\n          } else if(dtypes[arrNum] === \"generic\") {\n            pre.push([\"var \", localStr, \"=\", arrStr, \".get(\", ptrStr, \")\"].join(\"\")) // TODO: Could we optimize by checking for carg.rvalue?\n            code = code.replace(re, localStr)\n            if(carg.lvalue) {\n              post.push([arrStr, \".set(\", ptrStr, \",\", localStr,\")\"].join(\"\"))\n            }\n          } else {\n            pre.push([\"var \", localStr, \"=\", arrStr, \"[\", ptrStr, \"]\"].join(\"\")) // TODO: Could we optimize by checking for carg.rvalue?\n            code = code.replace(re, localStr)\n            if(carg.lvalue) {\n              post.push([arrStr, \"[\", ptrStr, \"]=\", localStr].join(\"\"))\n            }\n          }\n        } else { // Argument to body is a \"block\"\n          var reStrArr = [carg.name], ptrStrArr = [ptrStr]\n          for(var j=0; j<Math.abs(proc.arrayBlockIndices[arrNum]); j++) {\n            reStrArr.push(\"\\\\s*\\\\[([^\\\\]]+)\\\\]\")\n            ptrStrArr.push(\"$\" + (j+1) + \"*t\" + arrNum + \"b\" + j) // Matched index times stride\n          }\n          re = new RegExp(reStrArr.join(\"\"), \"g\")\n          ptrStr = ptrStrArr.join(\"+\")\n          if(dtypes[arrNum] === \"generic\") {\n            /*if(carg.lvalue) {\n              pre.push([\"var \", localStr, \"=\", arrStr, \".get(\", ptrStr, \")\"].join(\"\")) // Is this necessary if the argument is ONLY used as an lvalue? (keep in mind that we can have a += something, so we would actually need to check carg.rvalue)\n              code = code.replace(re, localStr)\n              post.push([arrStr, \".set(\", ptrStr, \",\", localStr,\")\"].join(\"\"))\n            } else {\n              code = code.replace(re, [arrStr, \".get(\", ptrStr, \")\"].join(\"\"))\n            }*/\n            throw new Error(\"cwise: Generic arrays not supported in combination with blocks!\")\n          } else {\n            // This does not produce any local variables, even if variables are used multiple times. It would be possible to do so, but it would complicate things quite a bit.\n            code = code.replace(re, [arrStr, \"[\", ptrStr, \"]\"].join(\"\"))\n          }\n        }\n      break\n      case \"scalar\":\n        code = code.replace(re, \"Y\" + proc.scalarArgs.indexOf(i))\n      break\n      case \"index\":\n        code = code.replace(re, \"index\")\n      break\n      case \"shape\":\n        code = code.replace(re, \"shape\")\n      break\n    }\n  }\n  return [pre.join(\"\\n\"), code, post.join(\"\\n\")].join(\"\\n\").trim()\n}\n\nfunction typeSummary(dtypes) {\n  var summary = new Array(dtypes.length)\n  var allEqual = true\n  for(var i=0; i<dtypes.length; ++i) {\n    var t = dtypes[i]\n    var digits = t.match(/\\d+/)\n    if(!digits) {\n      digits = \"\"\n    } else {\n      digits = digits[0]\n    }\n    if(t.charAt(0) === 0) {\n      summary[i] = \"u\" + t.charAt(1) + digits\n    } else {\n      summary[i] = t.charAt(0) + digits\n    }\n    if(i > 0) {\n      allEqual = allEqual && summary[i] === summary[i-1]\n    }\n  }\n  if(allEqual) {\n    return summary[0]\n  }\n  return summary.join(\"\")\n}\n\n//Generates a cwise operator\nfunction generateCWiseOp(proc, typesig) {\n\n  //Compute dimension\n  // Arrays get put first in typesig, and there are two entries per array (dtype and order), so this gets the number of dimensions in the first array arg.\n  var dimension = (typesig[1].length - Math.abs(proc.arrayBlockIndices[0]))|0\n  var orders = new Array(proc.arrayArgs.length)\n  var dtypes = new Array(proc.arrayArgs.length)\n  for(var i=0; i<proc.arrayArgs.length; ++i) {\n    dtypes[i] = typesig[2*i]\n    orders[i] = typesig[2*i+1]\n  }\n  \n  //Determine where block and loop indices start and end\n  var blockBegin = [], blockEnd = [] // These indices are exposed as blocks\n  var loopBegin = [], loopEnd = [] // These indices are iterated over\n  var loopOrders = [] // orders restricted to the loop indices\n  for(var i=0; i<proc.arrayArgs.length; ++i) {\n    if (proc.arrayBlockIndices[i]<0) {\n      loopBegin.push(0)\n      loopEnd.push(dimension)\n      blockBegin.push(dimension)\n      blockEnd.push(dimension+proc.arrayBlockIndices[i])\n    } else {\n      loopBegin.push(proc.arrayBlockIndices[i]) // Non-negative\n      loopEnd.push(proc.arrayBlockIndices[i]+dimension)\n      blockBegin.push(0)\n      blockEnd.push(proc.arrayBlockIndices[i])\n    }\n    var newOrder = []\n    for(var j=0; j<orders[i].length; j++) {\n      if (loopBegin[i]<=orders[i][j] && orders[i][j]<loopEnd[i]) {\n        newOrder.push(orders[i][j]-loopBegin[i]) // If this is a loop index, put it in newOrder, subtracting loopBegin, to make sure that all loopOrders are using a common set of indices.\n      }\n    }\n    loopOrders.push(newOrder)\n  }\n\n  //First create arguments for procedure\n  var arglist = [\"SS\"] // SS is the overall shape over which we iterate\n  var code = [\"'use strict'\"]\n  var vars = []\n  \n  for(var j=0; j<dimension; ++j) {\n    vars.push([\"s\", j, \"=SS[\", j, \"]\"].join(\"\")) // The limits for each dimension.\n  }\n  for(var i=0; i<proc.arrayArgs.length; ++i) {\n    arglist.push(\"a\"+i) // Actual data array\n    arglist.push(\"t\"+i) // Strides\n    arglist.push(\"p\"+i) // Offset in the array at which the data starts (also used for iterating over the data)\n    \n    for(var j=0; j<dimension; ++j) { // Unpack the strides into vars for looping\n      vars.push([\"t\",i,\"p\",j,\"=t\",i,\"[\",loopBegin[i]+j,\"]\"].join(\"\"))\n    }\n    \n    for(var j=0; j<Math.abs(proc.arrayBlockIndices[i]); ++j) { // Unpack the strides into vars for block iteration\n      vars.push([\"t\",i,\"b\",j,\"=t\",i,\"[\",blockBegin[i]+j,\"]\"].join(\"\"))\n    }\n  }\n  for(var i=0; i<proc.scalarArgs.length; ++i) {\n    arglist.push(\"Y\" + i)\n  }\n  if(proc.shapeArgs.length > 0) {\n    vars.push(\"shape=SS.slice(0)\") // Makes the shape over which we iterate available to the user defined functions (so you can use width/height for example)\n  }\n  if(proc.indexArgs.length > 0) {\n    // Prepare an array to keep track of the (logical) indices, initialized to dimension zeroes.\n    var zeros = new Array(dimension)\n    for(var i=0; i<dimension; ++i) {\n      zeros[i] = \"0\"\n    }\n    vars.push([\"index=[\", zeros.join(\",\"), \"]\"].join(\"\"))\n  }\n  for(var i=0; i<proc.offsetArgs.length; ++i) { // Offset arguments used for stencil operations\n    var off_arg = proc.offsetArgs[i]\n    var init_string = []\n    for(var j=0; j<off_arg.offset.length; ++j) {\n      if(off_arg.offset[j] === 0) {\n        continue\n      } else if(off_arg.offset[j] === 1) {\n        init_string.push([\"t\", off_arg.array, \"p\", j].join(\"\"))      \n      } else {\n        init_string.push([off_arg.offset[j], \"*t\", off_arg.array, \"p\", j].join(\"\"))\n      }\n    }\n    if(init_string.length === 0) {\n      vars.push(\"q\" + i + \"=0\")\n    } else {\n      vars.push([\"q\", i, \"=\", init_string.join(\"+\")].join(\"\"))\n    }\n  }\n\n  //Prepare this variables\n  var thisVars = uniq([].concat(proc.pre.thisVars)\n                      .concat(proc.body.thisVars)\n                      .concat(proc.post.thisVars))\n  vars = vars.concat(thisVars)\n  if (vars.length > 0) {\n    code.push(\"var \" + vars.join(\",\"))\n  }\n  for(var i=0; i<proc.arrayArgs.length; ++i) {\n    code.push(\"p\"+i+\"|=0\")\n  }\n  \n  //Inline prelude\n  if(proc.pre.body.length > 3) {\n    code.push(processBlock(proc.pre, proc, dtypes))\n  }\n\n  //Process body\n  var body = processBlock(proc.body, proc, dtypes)\n  var matched = countMatches(loopOrders)\n  if(matched < dimension) {\n    code.push(outerFill(matched, loopOrders[0], proc, body)) // TODO: Rather than passing loopOrders[0], it might be interesting to look at passing an order that represents the majority of the arguments for example.\n  } else {\n    code.push(innerFill(loopOrders[0], proc, body))\n  }\n\n  //Inline epilog\n  if(proc.post.body.length > 3) {\n    code.push(processBlock(proc.post, proc, dtypes))\n  }\n  \n  if(proc.debug) {\n    console.log(\"-----Generated cwise routine for \", typesig, \":\\n\" + code.join(\"\\n\") + \"\\n----------\")\n  }\n  \n  var loopName = [(proc.funcName||\"unnamed\"), \"_cwise_loop_\", orders[0].join(\"s\"),\"m\",matched,typeSummary(dtypes)].join(\"\")\n  var f = new Function([\"function \",loopName,\"(\", arglist.join(\",\"),\"){\", code.join(\"\\n\"),\"} return \", loopName].join(\"\"))\n  return f()\n}\nmodule.exports = generateCWiseOp\n","\"use strict\"\n\n// The function below is called when constructing a cwise function object, and does the following:\n// A function object is constructed which accepts as argument a compilation function and returns another function.\n// It is this other function that is eventually returned by createThunk, and this function is the one that actually\n// checks whether a certain pattern of arguments has already been used before and compiles new loops as needed.\n// The compilation passed to the first function object is used for compiling new functions.\n// Once this function object is created, it is called with compile as argument, where the first argument of compile\n// is bound to \"proc\" (essentially containing a preprocessed version of the user arguments to cwise).\n// So createThunk roughly works like this:\n// function createThunk(proc) {\n//   var thunk = function(compileBound) {\n//     var CACHED = {}\n//     return function(arrays and scalars) {\n//       if (dtype and order of arrays in CACHED) {\n//         var func = CACHED[dtype and order of arrays]\n//       } else {\n//         var func = CACHED[dtype and order of arrays] = compileBound(dtype and order of arrays)\n//       }\n//       return func(arrays and scalars)\n//     }\n//   }\n//   return thunk(compile.bind1(proc))\n// }\n\nvar compile = require(\"./compile.js\")\n\nfunction createThunk(proc) {\n  var code = [\"'use strict'\", \"var CACHED={}\"]\n  var vars = []\n  var thunkName = proc.funcName + \"_cwise_thunk\"\n  \n  //Build thunk\n  code.push([\"return function \", thunkName, \"(\", proc.shimArgs.join(\",\"), \"){\"].join(\"\"))\n  var typesig = []\n  var string_typesig = []\n  var proc_args = [[\"array\",proc.arrayArgs[0],\".shape.slice(\", // Slice shape so that we only retain the shape over which we iterate (which gets passed to the cwise operator as SS).\n                    Math.max(0,proc.arrayBlockIndices[0]),proc.arrayBlockIndices[0]<0?(\",\"+proc.arrayBlockIndices[0]+\")\"):\")\"].join(\"\")]\n  var shapeLengthConditions = [], shapeConditions = []\n  // Process array arguments\n  for(var i=0; i<proc.arrayArgs.length; ++i) {\n    var j = proc.arrayArgs[i]\n    vars.push([\"t\", j, \"=array\", j, \".dtype,\",\n               \"r\", j, \"=array\", j, \".order\"].join(\"\"))\n    typesig.push(\"t\" + j)\n    typesig.push(\"r\" + j)\n    string_typesig.push(\"t\"+j)\n    string_typesig.push(\"r\"+j+\".join()\")\n    proc_args.push(\"array\" + j + \".data\")\n    proc_args.push(\"array\" + j + \".stride\")\n    proc_args.push(\"array\" + j + \".offset|0\")\n    if (i>0) { // Gather conditions to check for shape equality (ignoring block indices)\n      shapeLengthConditions.push(\"array\" + proc.arrayArgs[0] + \".shape.length===array\" + j + \".shape.length+\" + (Math.abs(proc.arrayBlockIndices[0])-Math.abs(proc.arrayBlockIndices[i])))\n      shapeConditions.push(\"array\" + proc.arrayArgs[0] + \".shape[shapeIndex+\" + Math.max(0,proc.arrayBlockIndices[0]) + \"]===array\" + j + \".shape[shapeIndex+\" + Math.max(0,proc.arrayBlockIndices[i]) + \"]\")\n    }\n  }\n  // Check for shape equality\n  if (proc.arrayArgs.length > 1) {\n    code.push(\"if (!(\" + shapeLengthConditions.join(\" && \") + \")) throw new Error('cwise: Arrays do not all have the same dimensionality!')\")\n    code.push(\"for(var shapeIndex=array\" + proc.arrayArgs[0] + \".shape.length-\" + Math.abs(proc.arrayBlockIndices[0]) + \"; shapeIndex-->0;) {\")\n    code.push(\"if (!(\" + shapeConditions.join(\" && \") + \")) throw new Error('cwise: Arrays do not all have the same shape!')\")\n    code.push(\"}\")\n  }\n  // Process scalar arguments\n  for(var i=0; i<proc.scalarArgs.length; ++i) {\n    proc_args.push(\"scalar\" + proc.scalarArgs[i])\n  }\n  // Check for cached function (and if not present, generate it)\n  vars.push([\"type=[\", string_typesig.join(\",\"), \"].join()\"].join(\"\"))\n  vars.push(\"proc=CACHED[type]\")\n  code.push(\"var \" + vars.join(\",\"))\n  \n  code.push([\"if(!proc){\",\n             \"CACHED[type]=proc=compile([\", typesig.join(\",\"), \"])}\",\n             \"return proc(\", proc_args.join(\",\"), \")}\"].join(\"\"))\n\n  if(proc.debug) {\n    console.log(\"-----Generated thunk:\\n\" + code.join(\"\\n\") + \"\\n----------\")\n  }\n  \n  //Compile thunk\n  var thunk = new Function(\"compile\", code.join(\"\\n\"))\n  return thunk(compile.bind(undefined, proc))\n}\n\nmodule.exports = createThunk\n","\"use strict\"\n\nvar createThunk = require(\"./lib/thunk.js\")\n\nfunction Procedure() {\n  this.argTypes = []\n  this.shimArgs = []\n  this.arrayArgs = []\n  this.arrayBlockIndices = []\n  this.scalarArgs = []\n  this.offsetArgs = []\n  this.offsetArgIndex = []\n  this.indexArgs = []\n  this.shapeArgs = []\n  this.funcName = \"\"\n  this.pre = null\n  this.body = null\n  this.post = null\n  this.debug = false\n}\n\nfunction compileCwise(user_args) {\n  //Create procedure\n  var proc = new Procedure()\n  \n  //Parse blocks\n  proc.pre    = user_args.pre\n  proc.body   = user_args.body\n  proc.post   = user_args.post\n\n  //Parse arguments\n  var proc_args = user_args.args.slice(0)\n  proc.argTypes = proc_args\n  for(var i=0; i<proc_args.length; ++i) {\n    var arg_type = proc_args[i]\n    if(arg_type === \"array\" || (typeof arg_type === \"object\" && arg_type.blockIndices)) {\n      proc.argTypes[i] = \"array\"\n      proc.arrayArgs.push(i)\n      proc.arrayBlockIndices.push(arg_type.blockIndices ? arg_type.blockIndices : 0)\n      proc.shimArgs.push(\"array\" + i)\n      if(i < proc.pre.args.length && proc.pre.args[i].count>0) {\n        throw new Error(\"cwise: pre() block may not reference array args\")\n      }\n      if(i < proc.post.args.length && proc.post.args[i].count>0) {\n        throw new Error(\"cwise: post() block may not reference array args\")\n      }\n    } else if(arg_type === \"scalar\") {\n      proc.scalarArgs.push(i)\n      proc.shimArgs.push(\"scalar\" + i)\n    } else if(arg_type === \"index\") {\n      proc.indexArgs.push(i)\n      if(i < proc.pre.args.length && proc.pre.args[i].count > 0) {\n        throw new Error(\"cwise: pre() block may not reference array index\")\n      }\n      if(i < proc.body.args.length && proc.body.args[i].lvalue) {\n        throw new Error(\"cwise: body() block may not write to array index\")\n      }\n      if(i < proc.post.args.length && proc.post.args[i].count > 0) {\n        throw new Error(\"cwise: post() block may not reference array index\")\n      }\n    } else if(arg_type === \"shape\") {\n      proc.shapeArgs.push(i)\n      if(i < proc.pre.args.length && proc.pre.args[i].lvalue) {\n        throw new Error(\"cwise: pre() block may not write to array shape\")\n      }\n      if(i < proc.body.args.length && proc.body.args[i].lvalue) {\n        throw new Error(\"cwise: body() block may not write to array shape\")\n      }\n      if(i < proc.post.args.length && proc.post.args[i].lvalue) {\n        throw new Error(\"cwise: post() block may not write to array shape\")\n      }\n    } else if(typeof arg_type === \"object\" && arg_type.offset) {\n      proc.argTypes[i] = \"offset\"\n      proc.offsetArgs.push({ array: arg_type.array, offset:arg_type.offset })\n      proc.offsetArgIndex.push(i)\n    } else {\n      throw new Error(\"cwise: Unknown argument type \" + proc_args[i])\n    }\n  }\n  \n  //Make sure at least one array argument was specified\n  if(proc.arrayArgs.length <= 0) {\n    throw new Error(\"cwise: No array arguments specified\")\n  }\n  \n  //Make sure arguments are correct\n  if(proc.pre.args.length > proc_args.length) {\n    throw new Error(\"cwise: Too many arguments in pre() block\")\n  }\n  if(proc.body.args.length > proc_args.length) {\n    throw new Error(\"cwise: Too many arguments in body() block\")\n  }\n  if(proc.post.args.length > proc_args.length) {\n    throw new Error(\"cwise: Too many arguments in post() block\")\n  }\n\n  //Check debug flag\n  proc.debug = !!user_args.printCode || !!user_args.debug\n  \n  //Retrieve name\n  proc.funcName = user_args.funcName || \"cwise\"\n  \n  //Read in block size\n  proc.blockSize = user_args.blockSize || 64\n\n  return createThunk(proc)\n}\n\nmodule.exports = compileCwise\n","\"use strict\"\n\nvar compile = require(\"cwise-compiler\")\n\nvar EmptyProc = {\n  body: \"\",\n  args: [],\n  thisVars: [],\n  localVars: []\n}\n\nfunction fixup(x) {\n  if(!x) {\n    return EmptyProc\n  }\n  for(var i=0; i<x.args.length; ++i) {\n    var a = x.args[i]\n    if(i === 0) {\n      x.args[i] = {name: a, lvalue:true, rvalue: !!x.rvalue, count:x.count||1 }\n    } else {\n      x.args[i] = {name: a, lvalue:false, rvalue:true, count: 1}\n    }\n  }\n  if(!x.thisVars) {\n    x.thisVars = []\n  }\n  if(!x.localVars) {\n    x.localVars = []\n  }\n  return x\n}\n\nfunction pcompile(user_args) {\n  return compile({\n    args:     user_args.args,\n    pre:      fixup(user_args.pre),\n    body:     fixup(user_args.body),\n    post:     fixup(user_args.proc),\n    funcName: user_args.funcName\n  })\n}\n\nfunction makeOp(user_args) {\n  var args = []\n  for(var i=0; i<user_args.args.length; ++i) {\n    args.push(\"a\"+i)\n  }\n  var wrapper = new Function(\"P\", [\n    \"return function \", user_args.funcName, \"_ndarrayops(\", args.join(\",\"), \") {P(\", args.join(\",\"), \");return a0}\"\n  ].join(\"\"))\n  return wrapper(pcompile(user_args))\n}\n\nvar assign_ops = {\n  add:  \"+\",\n  sub:  \"-\",\n  mul:  \"*\",\n  div:  \"/\",\n  mod:  \"%\",\n  band: \"&\",\n  bor:  \"|\",\n  bxor: \"^\",\n  lshift: \"<<\",\n  rshift: \">>\",\n  rrshift: \">>>\"\n}\n;(function(){\n  for(var id in assign_ops) {\n    var op = assign_ops[id]\n    exports[id] = makeOp({\n      args: [\"array\",\"array\",\"array\"],\n      body: {args:[\"a\",\"b\",\"c\"],\n             body: \"a=b\"+op+\"c\"},\n      funcName: id\n    })\n    exports[id+\"eq\"] = makeOp({\n      args: [\"array\",\"array\"],\n      body: {args:[\"a\",\"b\"],\n             body:\"a\"+op+\"=b\"},\n      rvalue: true,\n      funcName: id+\"eq\"\n    })\n    exports[id+\"s\"] = makeOp({\n      args: [\"array\", \"array\", \"scalar\"],\n      body: {args:[\"a\",\"b\",\"s\"],\n             body:\"a=b\"+op+\"s\"},\n      funcName: id+\"s\"\n    })\n    exports[id+\"seq\"] = makeOp({\n      args: [\"array\",\"scalar\"],\n      body: {args:[\"a\",\"s\"],\n             body:\"a\"+op+\"=s\"},\n      rvalue: true,\n      funcName: id+\"seq\"\n    })\n  }\n})();\n\nvar unary_ops = {\n  not: \"!\",\n  bnot: \"~\",\n  neg: \"-\",\n  recip: \"1.0/\"\n}\n;(function(){\n  for(var id in unary_ops) {\n    var op = unary_ops[id]\n    exports[id] = makeOp({\n      args: [\"array\", \"array\"],\n      body: {args:[\"a\",\"b\"],\n             body:\"a=\"+op+\"b\"},\n      funcName: id\n    })\n    exports[id+\"eq\"] = makeOp({\n      args: [\"array\"],\n      body: {args:[\"a\"],\n             body:\"a=\"+op+\"a\"},\n      rvalue: true,\n      count: 2,\n      funcName: id+\"eq\"\n    })\n  }\n})();\n\nvar binary_ops = {\n  and: \"&&\",\n  or: \"||\",\n  eq: \"===\",\n  neq: \"!==\",\n  lt: \"<\",\n  gt: \">\",\n  leq: \"<=\",\n  geq: \">=\"\n}\n;(function() {\n  for(var id in binary_ops) {\n    var op = binary_ops[id]\n    exports[id] = makeOp({\n      args: [\"array\",\"array\",\"array\"],\n      body: {args:[\"a\", \"b\", \"c\"],\n             body:\"a=b\"+op+\"c\"},\n      funcName: id\n    })\n    exports[id+\"s\"] = makeOp({\n      args: [\"array\",\"array\",\"scalar\"],\n      body: {args:[\"a\", \"b\", \"s\"],\n             body:\"a=b\"+op+\"s\"},\n      funcName: id+\"s\"\n    })\n    exports[id+\"eq\"] = makeOp({\n      args: [\"array\", \"array\"],\n      body: {args:[\"a\", \"b\"],\n             body:\"a=a\"+op+\"b\"},\n      rvalue:true,\n      count:2,\n      funcName: id+\"eq\"\n    })\n    exports[id+\"seq\"] = makeOp({\n      args: [\"array\", \"scalar\"],\n      body: {args:[\"a\",\"s\"],\n             body:\"a=a\"+op+\"s\"},\n      rvalue:true,\n      count:2,\n      funcName: id+\"seq\"\n    })\n  }\n})();\n\nvar math_unary = [\n  \"abs\",\n  \"acos\",\n  \"asin\",\n  \"atan\",\n  \"ceil\",\n  \"cos\",\n  \"exp\",\n  \"floor\",\n  \"log\",\n  \"round\",\n  \"sin\",\n  \"sqrt\",\n  \"tan\"\n]\n;(function() {\n  for(var i=0; i<math_unary.length; ++i) {\n    var f = math_unary[i]\n    exports[f] = makeOp({\n                    args: [\"array\", \"array\"],\n                    pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                    body: {args:[\"a\",\"b\"], body:\"a=this_f(b)\", thisVars:[\"this_f\"]},\n                    funcName: f\n                  })\n    exports[f+\"eq\"] = makeOp({\n                      args: [\"array\"],\n                      pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                      body: {args: [\"a\"], body:\"a=this_f(a)\", thisVars:[\"this_f\"]},\n                      rvalue: true,\n                      count: 2,\n                      funcName: f+\"eq\"\n                    })\n  }\n})();\n\nvar math_comm = [\n  \"max\",\n  \"min\",\n  \"atan2\",\n  \"pow\"\n]\n;(function(){\n  for(var i=0; i<math_comm.length; ++i) {\n    var f= math_comm[i]\n    exports[f] = makeOp({\n                  args:[\"array\", \"array\", \"array\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\",\"c\"], body:\"a=this_f(b,c)\", thisVars:[\"this_f\"]},\n                  funcName: f\n                })\n    exports[f+\"s\"] = makeOp({\n                  args:[\"array\", \"array\", \"scalar\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\",\"c\"], body:\"a=this_f(b,c)\", thisVars:[\"this_f\"]},\n                  funcName: f+\"s\"\n                  })\n    exports[f+\"eq\"] = makeOp({ args:[\"array\", \"array\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\"], body:\"a=this_f(a,b)\", thisVars:[\"this_f\"]},\n                  rvalue: true,\n                  count: 2,\n                  funcName: f+\"eq\"\n                  })\n    exports[f+\"seq\"] = makeOp({ args:[\"array\", \"scalar\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\"], body:\"a=this_f(a,b)\", thisVars:[\"this_f\"]},\n                  rvalue:true,\n                  count:2,\n                  funcName: f+\"seq\"\n                  })\n  }\n})();\n\nvar math_noncomm = [\n  \"atan2\",\n  \"pow\"\n]\n;(function(){\n  for(var i=0; i<math_noncomm.length; ++i) {\n    var f= math_noncomm[i]\n    exports[f+\"op\"] = makeOp({\n                  args:[\"array\", \"array\", \"array\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\",\"c\"], body:\"a=this_f(c,b)\", thisVars:[\"this_f\"]},\n                  funcName: f+\"op\"\n                })\n    exports[f+\"ops\"] = makeOp({\n                  args:[\"array\", \"array\", \"scalar\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\",\"c\"], body:\"a=this_f(c,b)\", thisVars:[\"this_f\"]},\n                  funcName: f+\"ops\"\n                  })\n    exports[f+\"opeq\"] = makeOp({ args:[\"array\", \"array\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\"], body:\"a=this_f(b,a)\", thisVars:[\"this_f\"]},\n                  rvalue: true,\n                  count: 2,\n                  funcName: f+\"opeq\"\n                  })\n    exports[f+\"opseq\"] = makeOp({ args:[\"array\", \"scalar\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\"], body:\"a=this_f(b,a)\", thisVars:[\"this_f\"]},\n                  rvalue:true,\n                  count:2,\n                  funcName: f+\"opseq\"\n                  })\n  }\n})();\n\nexports.any = compile({\n  args:[\"array\"],\n  pre: EmptyProc,\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:1}], body: \"if(a){return true}\", localVars: [], thisVars: []},\n  post: {args:[], localVars:[], thisVars:[], body:\"return false\"},\n  funcName: \"any\"\n})\n\nexports.all = compile({\n  args:[\"array\"],\n  pre: EmptyProc,\n  body: {args:[{name:\"x\", lvalue:false, rvalue:true, count:1}], body: \"if(!x){return false}\", localVars: [], thisVars: []},\n  post: {args:[], localVars:[], thisVars:[], body:\"return true\"},\n  funcName: \"all\"\n})\n\nexports.sum = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=0\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:1}], body: \"this_s+=a\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return this_s\"},\n  funcName: \"sum\"\n})\n\nexports.prod = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=1\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:1}], body: \"this_s*=a\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return this_s\"},\n  funcName: \"prod\"\n})\n\nexports.norm2squared = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=0\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:2}], body: \"this_s+=a*a\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return this_s\"},\n  funcName: \"norm2squared\"\n})\n  \nexports.norm2 = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=0\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:2}], body: \"this_s+=a*a\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return Math.sqrt(this_s)\"},\n  funcName: \"norm2\"\n})\n  \n\nexports.norminf = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=0\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:4}], body:\"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return this_s\"},\n  funcName: \"norminf\"\n})\n\nexports.norm1 = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=0\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:3}], body: \"this_s+=a<0?-a:a\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return this_s\"},\n  funcName: \"norm1\"\n})\n\nexports.sup = compile({\n  args: [ \"array\" ],\n  pre:\n   { body: \"this_h=-Infinity\",\n     args: [],\n     thisVars: [ \"this_h\" ],\n     localVars: [] },\n  body:\n   { body: \"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_\",\n     args: [{\"name\":\"_inline_1_arg0_\",\"lvalue\":false,\"rvalue\":true,\"count\":2} ],\n     thisVars: [ \"this_h\" ],\n     localVars: [] },\n  post:\n   { body: \"return this_h\",\n     args: [],\n     thisVars: [ \"this_h\" ],\n     localVars: [] }\n })\n\nexports.inf = compile({\n  args: [ \"array\" ],\n  pre:\n   { body: \"this_h=Infinity\",\n     args: [],\n     thisVars: [ \"this_h\" ],\n     localVars: [] },\n  body:\n   { body: \"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_\",\n     args: [{\"name\":\"_inline_1_arg0_\",\"lvalue\":false,\"rvalue\":true,\"count\":2} ],\n     thisVars: [ \"this_h\" ],\n     localVars: [] },\n  post:\n   { body: \"return this_h\",\n     args: [],\n     thisVars: [ \"this_h\" ],\n     localVars: [] }\n })\n\nexports.argmin = compile({\n  args:[\"index\",\"array\",\"shape\"],\n  pre:{\n    body:\"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}\",\n    args:[\n      {name:\"_inline_0_arg0_\",lvalue:false,rvalue:false,count:0},\n      {name:\"_inline_0_arg1_\",lvalue:false,rvalue:false,count:0},\n      {name:\"_inline_0_arg2_\",lvalue:false,rvalue:true,count:1}\n      ],\n    thisVars:[\"this_i\",\"this_v\"],\n    localVars:[]},\n  body:{\n    body:\"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}\",\n    args:[\n      {name:\"_inline_1_arg0_\",lvalue:false,rvalue:true,count:2},\n      {name:\"_inline_1_arg1_\",lvalue:false,rvalue:true,count:2}],\n    thisVars:[\"this_i\",\"this_v\"],\n    localVars:[\"_inline_1_k\"]},\n  post:{\n    body:\"{return this_i}\",\n    args:[],\n    thisVars:[\"this_i\"],\n    localVars:[]}\n})\n\nexports.argmax = compile({\n  args:[\"index\",\"array\",\"shape\"],\n  pre:{\n    body:\"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}\",\n    args:[\n      {name:\"_inline_0_arg0_\",lvalue:false,rvalue:false,count:0},\n      {name:\"_inline_0_arg1_\",lvalue:false,rvalue:false,count:0},\n      {name:\"_inline_0_arg2_\",lvalue:false,rvalue:true,count:1}\n      ],\n    thisVars:[\"this_i\",\"this_v\"],\n    localVars:[]},\n  body:{\n    body:\"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}\",\n    args:[\n      {name:\"_inline_1_arg0_\",lvalue:false,rvalue:true,count:2},\n      {name:\"_inline_1_arg1_\",lvalue:false,rvalue:true,count:2}],\n    thisVars:[\"this_i\",\"this_v\"],\n    localVars:[\"_inline_1_k\"]},\n  post:{\n    body:\"{return this_i}\",\n    args:[],\n    thisVars:[\"this_i\"],\n    localVars:[]}\n})  \n\nexports.random = makeOp({\n  args: [\"array\"],\n  pre: {args:[], body:\"this_f=Math.random\", thisVars:[\"this_f\"]},\n  body: {args: [\"a\"], body:\"a=this_f()\", thisVars:[\"this_f\"]},\n  funcName: \"random\"\n})\n\nexports.assign = makeOp({\n  args:[\"array\", \"array\"],\n  body: {args:[\"a\", \"b\"], body:\"a=b\"},\n  funcName: \"assign\" })\n\nexports.assigns = makeOp({\n  args:[\"array\", \"scalar\"],\n  body: {args:[\"a\", \"b\"], body:\"a=b\"},\n  funcName: \"assigns\" })\n\n\nexports.equals = compile({\n  args:[\"array\", \"array\"],\n  pre: EmptyProc,\n  body: {args:[{name:\"x\", lvalue:false, rvalue:true, count:1},\n               {name:\"y\", lvalue:false, rvalue:true, count:1}], \n        body: \"if(x!==y){return false}\", \n        localVars: [], \n        thisVars: []},\n  post: {args:[], localVars:[], thisVars:[], body:\"return true\"},\n  funcName: \"equals\"\n})\n\n\n","import ndarray from \"ndarray\";\nimport ops from \"ndarray-ops\";\n\nlet rafId;\nlet continueProcessing = false;\nlet myWorker = null;  //  Track current worker instance\nlet inputVideo;\nlet faceMesh;\n\nconst leftEyeCanvas = document.createElement(\"canvas\");\nleftEyeCanvas.width = 128;\nleftEyeCanvas.height = 128;\nconst leftEyectx = leftEyeCanvas.getContext(\"2d\",{ willReadFrequently: true })\n\nconst rightEyeCanvas = document.createElement(\"canvas\");\nrightEyeCanvas.width = 128;\nrightEyeCanvas.height = 128;\nconst rightEyectx = rightEyeCanvas.getContext(\"2d\",{ willReadFrequently: true });\n\n// export function createWorker(onGazeCallback) {\n//     if (myWorker) return myWorker;  //  Reuse if already exists\n\n//     myWorker = new Worker(new URL('worker.js', import.meta.url), {\n//       type: \"module\"\n//     });\n  \n//     myWorker.onmessage = (e) => {\n//       const { type, error, ...data } = e.data;\n\n//       if (e.data.error) {\n//         console.error(\"Worker error:\", e.data.error);\n//         return;\n//       }\n\n//         // Ignore model lifecycle messages\n//       if (type === \"modelLoaded\" || type === \"modelLoadFailed\") {\n//         console.log(` Received \"${type}\" from worker`);\n//         return;\n//       }\n  \n//       let output = e.data;\n//       // console.log(output)\n//       if (onGazeCallback) onGazeCallback(output);\n//     };\n\n//     return myWorker;\n//   }\n\n  export function createWorker(onGazeCallback, onModelReady = null) {\n    if (myWorker) return myWorker;\n  \n    myWorker = new Worker(new URL('https://unpkg.com/peekr@1.0.1/dist/worker-B_a3yASh.js', import.meta.url), {\n      type: \"module\"\n    });\n  \n    myWorker.onmessage = (e) => {\n      const { type, error, ...data } = e.data;\n  \n      if (error) {\n        console.error(\"Worker error:\", error);\n        return;\n      }\n  \n      // Handle model lifecycle messages\n      if (type === \"modelLoaded\") {\n        console.log(` Received \"modelLoaded\" from worker`);\n        if (onModelReady) onModelReady();\n        return;\n      }\n  \n      if (type === \"modelLoadFailed\") {\n        console.error(\" Model failed to load inside worker\");\n        return;\n      }\n  \n      // All other messages are gaze updates\n      if (onGazeCallback) onGazeCallback(data);\n    };\n  \n    return myWorker;\n  }\n\nexport function setupFaceMesh(video, canvas, onReady,onGaze ) {\n    inputVideo = video;\n    // myWorker = createWorker(onGaze);\n    myWorker = createWorker(onGaze, () => {\n      console.log(\" Model loaded inside worker, calling onReady\");\n      if (onReady) onReady();\n    });\n  \n    faceMesh = new window.FaceMesh({\n      locateFile: (file) =>\n        `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh@0.4/${file}`,\n    });\n  \n    faceMesh.setOptions({\n      selfieMode: true,\n      refineLandmarks: true,\n      maxNumFaces: 1,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5,\n    });\n  \n    faceMesh.onResults(onResultsFaceMesh);\n  \n    inputVideo.addEventListener(\"play\", () => {\n      continueProcessing = true;\n      // onReady?.();\n    });\n  }\n\nexport function startInference() {\n    continueProcessing = true;\n    \n    async function run() {\n        if (!continueProcessing) return;\n    \n        await faceMesh.send({ image: inputVideo });\n    \n        // Schedule next frame\n        rafId = requestAnimationFrame(run);\n    }\n    \n    run();\n}\n      \nexport function stopInference() {\n        continueProcessing = false;\n      \n        if (rafId !== null) {\n          cancelAnimationFrame(rafId);\n          rafId = null;\n        }\n    }\n      \n\nfunction onResultsFaceMesh(results) {\n    if (!results.multiFaceLandmarks || results.multiFaceLandmarks.length === 0)\n        return;\n\n    const landmarks = results.multiFaceLandmarks[0];\n    const w = inputVideo.videoWidth;\n    const h = inputVideo.videoHeight;\n\n    const leftEyeCoor = [];\n    const rightEyeCoor = [];\n\n    collectCoordinates(landmarks, [130, 27, 243, 23], leftEyeCoor);\n    collectCoordinates(landmarks, [463, 257, 359, 253], rightEyeCoor);\n\n    if (leftEyeCoor.length === 0 || rightEyeCoor.length === 0) return;\n\n    // LEFT EYE\n    let [ulx, uly, width, height] = convertToYolo(leftEyeCoor, w, h);\n    const kps = [\n        ulx / w,\n        uly / h,\n        width / w,\n        height / h,\n    ];\n\n    leftEyectx.drawImage(\n        inputVideo,\n        Math.max(0, w - ulx - width),\n        Math.max(0, uly),\n        Math.max(0, width),\n        Math.max(0, height),\n        0,\n        0,\n        128,\n        128\n    );\n\n    // RIGHT EYE\n    [ulx, uly, width, height] = convertToYolo(rightEyeCoor, w, h);\n    kps.push(\n        ulx / w,\n        uly / h,\n        width / w,\n        height / h\n    );\n\n    rightEyectx.drawImage(\n        inputVideo,\n        Math.max(0, w - ulx - width),\n        Math.max(0, uly),\n        Math.max(0, width),\n        Math.max(0, height),\n        0,\n        0,\n        128,\n        128\n    );\n\n    const imageDataL = leftEyectx.getImageData(0, 0, 128, 128);\n    let input1 = preprocess(imageDataL.data, 128, 128);\n    // const input1 = new Tensor(preprocessedData, \"float32\", [1, 3, 128, 128]);\n\n    const imageDataR = rightEyectx.getImageData(0, 0, 128, 128);\n    let input2 = preprocess(imageDataR.data, 128, 128);\n    // const input2 = new Tensor(preprocessedData, \"float32\", [1, 3, 128, 128]);\n\n    let kpsTensor = preprocess_kps(kps);\n    // const kpsTensor = new Tensor(preprocessedData, \"float32\", [1, 8]);\n\n    myWorker.postMessage({\n        input1: { data: input1 },\n        input2: { data: input2 },\n        kpsTensor: { data: kpsTensor },\n      });\n  }\n\n\n  function preprocess(data, width, height) {\n    const dataFromImage = ndarray(new Float32Array(data), [width, height, 4]);\n    const dataProcessed = ndarray(new Float32Array(width * height * 3), [\n      1,\n      3,\n      height,\n      width,\n    ]);\n  \n    // Normalize 0-255 to 0 - 1\n    ops.divseq(dataFromImage, 255.0);\n    // Realign imageData from [224*224*4] to the correct dimension [1*3*224*224].\n    ops.assign(\n      dataProcessed.pick(0, 0, null, null),\n      dataFromImage.pick(null, null, 2),\n    );\n    ops.assign(\n      dataProcessed.pick(0, 1, null, null),\n      dataFromImage.pick(null, null, 1),\n    );\n    ops.assign(\n      dataProcessed.pick(0, 2, null, null),\n      dataFromImage.pick(null, null, 0),\n    );\n    return new Float32Array(dataProcessed.data);\n  }\n\n  function preprocess_kps(data, width, height) {\n    const dataFromImage = ndarray(new Float32Array(data), [data.length]);\n    const dataProcessed = ndarray(new Float32Array(data.length), [\n      1,\n      data.length,\n    ]);\n    ops.assign(dataProcessed.pick(0, null), dataFromImage);\n  \n    return new Float32Array(dataProcessed.data);\n  }\n\n  function convertToYolo(feature, w, h) {\n    let centerx = (feature[0][0] + feature[2][0]) / 2.0;\n    let centery = (feature[1][1] + feature[3][1]) / 2.0;\n    let width = feature[2][0] - feature[0][0];\n    let height = feature[3][1] - feature[1][1];\n    let box = [centerx, centery, width, height];\n    let upper_left_x = (box[0] - box[2] / 2) * w;\n    let upper_left_y = (box[1] - box[3] / 2) * h;\n    width = box[2] * w;\n    height = box[3] * h;\n    return [upper_left_x, upper_left_y, width, height];\n  }\n\n  function collectCoordinates(landmarks, indices, coordinates) {\n    indices.forEach((index) => {\n      const point = landmarks[index];\n      coordinates.push([point.x, point.y]);\n    });\n  }\n  ","import { setupFaceMesh, startInference, stopInference } from \"./eyetracking.js\";\n\nlet videoElement;\nlet canvasElement;\nlet isInitialized = false;\n\nexport function initEyeTracking({\n    containerId = null,\n    video = null,\n    canvas = null,\n    hide = true,\n    onReady = null, // optional callback\n    onGaze = null, //  add this\n  } = {}) {\n    const container = containerId ? document.getElementById(containerId) : document.body;\n  \n    if (!video) {\n      video = document.createElement(\"video\");\n      video.className = \"inputVideo\";\n      video.autoplay = true;\n      video.playsInline = true;\n      if (hide) video.style.display = \"none\";\n      container.appendChild(video);\n    }\n  \n    if (!canvas) {\n      canvas = document.createElement(\"canvas\");\n      canvas.id = \"headCanvas\";\n      if (hide) canvas.style.display = \"none\";\n      container.appendChild(canvas);\n    }\n    \n    console.log(\"initialising ...\")\n    navigator.mediaDevices.getUserMedia({   video: {\n      facingMode: \"user\"  // Ensures front-facing camera\n    } }).then((stream) => {\n      // Flip video horizontally if front-facing camera\n      // video.style.transform = \"scaleX(-1)\";\n      // video.style.transformOrigin = \"center center\";\n\n      video.srcObject = stream;\n      setupFaceMesh(video, canvas, () => {\n        isInitialized = true;\n        console.log(\"initialised, ready to run eyetracking\")\n        if (onReady) onReady();\n      }, onGaze); //  forward to setupFaceMesh\n    });\n  \n    videoElement = video;\n    canvasElement = canvas;\n  }\n  \n  export function runEyeTracking() {\n    if (!isInitialized) {\n      console.warn(\"Eye tracking has not been initialized. Call initEyeTracking() first.\");\n      return;\n    }\n  \n    startInference();\n  }\n  \n  export function stopEyeTracking() {\n    stopInference();\n  \n    // // Remove elements from DOM\n    // videoElement?.remove();\n    // canvasElement?.remove();\n  \n    // // Reset refs\n    // videoElement = null;\n    // canvasElement = null;\n\n}\n  \n"],"names":["isBuffer","obj","constructor","iota","n","result","Array","i","readFloatLE","slice","isSlowBuffer","_isBuffer","hasTypedArrays","Float64Array","compare1st","a","b","order","stride","this","terms","length","Math","abs","sort","compileConstructor","dtype","dimension","className","join","useGetters","code","Function","procedure","CACHED_CONSTRUCTORS","indices","args","map","index_str","shapeArg","strideArg","push","a_vars","c_vars","tShape","tStride","idx","float32","float64","int8","int16","int32","uint8","uint16","uint32","array","uint8_clamped","bigint64","biguint64","buffer","generic","data","shape","offset","undefined","ctor","d","sz","Object","prototype","toString","call","isArray","arrayDType","ctor_list","uniq","list","compare","sorted","ptr","len","unique_pred","unique_eq","innerFill","proc","body","j","nargs","arrayArgs","has_index","indexArgs","vars","pidx","processBlock","block","dtypes","pre","post","carg","count","re","RegExp","name","ptrStr","arrNum","indexOf","argTypes","offArgIndex","offsetArgIndex","offsetArgs","localStr","arrStr","arrayBlockIndices","lvalue","replace","reStrArr","ptrStrArr","Error","scalarArgs","trim","typeSummary","summary","allEqual","t","digits","match","charAt","compile","typesig","orders","blockBegin","blockEnd","loopBegin","loopEnd","loopOrders","newOrder","arglist","shapeArgs","zeros","off_arg","init_string","thisVars","concat","matched","countMatches","blockSize","indexStr","outerFill","debug","console","log","loopName","funcName","f","require$$0","createThunk","thunkName","shimArgs","string_typesig","proc_args","max","shapeLengthConditions","shapeConditions","thunk","bind","Procedure","compiler","user_args","arg_type","blockIndices","printCode","EmptyProc","localVars","fixup","x","rvalue","makeOp","wrapper","pcompile","assign_ops","add","sub","mul","div","mod","band","bor","bxor","lshift","rshift","rrshift","id","op","exports","unary_ops","not","bnot","neg","recip","binary_ops","and","or","eq","neq","lt","gt","leq","geq","math_unary","math_comm","math_noncomm","any","all","sum","prod","norm2squared","norm2","norminf","norm1","sup","inf","argmin","argmax","random","assign","assigns","equals","rafId","inputVideo","faceMesh","continueProcessing","myWorker","leftEyeCanvas","document","createElement","width","height","leftEyectx","getContext","willReadFrequently","rightEyeCanvas","rightEyectx","setupFaceMesh","video","canvas","onReady","onGaze","onGazeCallback","onModelReady","Worker","URL","url","type","onmessage","e","error","createWorker","window","FaceMesh","locateFile","file","setOptions","selfieMode","refineLandmarks","maxNumFaces","minDetectionConfidence","minTrackingConfidence","onResults","onResultsFaceMesh","addEventListener","results","multiFaceLandmarks","landmarks","w","videoWidth","h","videoHeight","leftEyeCoor","rightEyeCoor","collectCoordinates","ulx","uly","convertToYolo","kps","drawImage","input1","preprocess","getImageData","input2","kpsTensor","dataFromImage","ndarray","Float32Array","dataProcessed","ops","pick","preprocess_kps","postMessage","divseq","feature","centerx","centery","box","coordinates","forEach","index","point","y","isInitialized","initEyeTracking","containerId","hide","container","getElementById","autoplay","playsInline","style","display","appendChild","navigator","mediaDevices","getUserMedia","facingMode","then","stream","srcObject","runEyeTracking","async","run","send","image","requestAnimationFrame","warn","stopEyeTracking","cancelAnimationFrame"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7]}